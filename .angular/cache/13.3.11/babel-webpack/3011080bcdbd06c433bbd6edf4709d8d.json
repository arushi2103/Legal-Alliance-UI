{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"D:\\\\dev-projects\\\\APEX\\\\Legalalliance\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\asyncToGenerator.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Plain = void 0;\n\nconst bson_1 = require(\"../../bson\");\n\nconst error_1 = require(\"../../error\");\n\nconst utils_1 = require(\"../../utils\");\n\nconst auth_provider_1 = require(\"./auth_provider\");\n\nclass Plain extends auth_provider_1.AuthProvider {\n  auth(authContext) {\n    return _asyncToGenerator(function* () {\n      const {\n        connection,\n        credentials\n      } = authContext;\n\n      if (!credentials) {\n        throw new error_1.MongoMissingCredentialsError('AuthContext must provide credentials.');\n      }\n\n      const {\n        username,\n        password\n      } = credentials;\n      const payload = new bson_1.Binary(Buffer.from(`\\x00${username}\\x00${password}`));\n      const command = {\n        saslStart: 1,\n        mechanism: 'PLAIN',\n        payload: payload,\n        autoAuthorize: 1\n      };\n      yield connection.commandAsync((0, utils_1.ns)('$external.$cmd'), command, undefined);\n    })();\n  }\n\n}\n\nexports.Plain = Plain;","map":{"version":3,"sources":["D:/dev-projects/APEX/Legalalliance/node_modules/mongodb/lib/cmap/auth/plain.js"],"names":["Object","defineProperty","exports","value","Plain","bson_1","require","error_1","utils_1","auth_provider_1","AuthProvider","auth","authContext","connection","credentials","MongoMissingCredentialsError","username","password","payload","Binary","Buffer","from","command","saslStart","mechanism","autoAuthorize","commandAsync","ns","undefined"],"mappings":"AAAA;;;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,KAAR,GAAgB,KAAK,CAArB;;AACA,MAAMC,MAAM,GAAGC,OAAO,CAAC,YAAD,CAAtB;;AACA,MAAMC,OAAO,GAAGD,OAAO,CAAC,aAAD,CAAvB;;AACA,MAAME,OAAO,GAAGF,OAAO,CAAC,aAAD,CAAvB;;AACA,MAAMG,eAAe,GAAGH,OAAO,CAAC,iBAAD,CAA/B;;AACA,MAAMF,KAAN,SAAoBK,eAAe,CAACC,YAApC,CAAiD;AACvCC,EAAAA,IAAI,CAACC,WAAD,EAAc;AAAA;AACpB,YAAM;AAAEC,QAAAA,UAAF;AAAcC,QAAAA;AAAd,UAA8BF,WAApC;;AACA,UAAI,CAACE,WAAL,EAAkB;AACd,cAAM,IAAIP,OAAO,CAACQ,4BAAZ,CAAyC,uCAAzC,CAAN;AACH;;AACD,YAAM;AAAEC,QAAAA,QAAF;AAAYC,QAAAA;AAAZ,UAAyBH,WAA/B;AACA,YAAMI,OAAO,GAAG,IAAIb,MAAM,CAACc,MAAX,CAAkBC,MAAM,CAACC,IAAP,CAAa,OAAML,QAAS,OAAMC,QAAS,EAA3C,CAAlB,CAAhB;AACA,YAAMK,OAAO,GAAG;AACZC,QAAAA,SAAS,EAAE,CADC;AAEZC,QAAAA,SAAS,EAAE,OAFC;AAGZN,QAAAA,OAAO,EAAEA,OAHG;AAIZO,QAAAA,aAAa,EAAE;AAJH,OAAhB;AAMA,YAAMZ,UAAU,CAACa,YAAX,CAAwB,CAAC,GAAGlB,OAAO,CAACmB,EAAZ,EAAgB,gBAAhB,CAAxB,EAA2DL,OAA3D,EAAoEM,SAApE,CAAN;AAboB;AAcvB;;AAf4C;;AAiBjD1B,OAAO,CAACE,KAAR,GAAgBA,KAAhB","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Plain = void 0;\nconst bson_1 = require(\"../../bson\");\nconst error_1 = require(\"../../error\");\nconst utils_1 = require(\"../../utils\");\nconst auth_provider_1 = require(\"./auth_provider\");\nclass Plain extends auth_provider_1.AuthProvider {\n    async auth(authContext) {\n        const { connection, credentials } = authContext;\n        if (!credentials) {\n            throw new error_1.MongoMissingCredentialsError('AuthContext must provide credentials.');\n        }\n        const { username, password } = credentials;\n        const payload = new bson_1.Binary(Buffer.from(`\\x00${username}\\x00${password}`));\n        const command = {\n            saslStart: 1,\n            mechanism: 'PLAIN',\n            payload: payload,\n            autoAuthorize: 1\n        };\n        await connection.commandAsync((0, utils_1.ns)('$external.$cmd'), command, undefined);\n    }\n}\nexports.Plain = Plain;\n"]},"metadata":{},"sourceType":"script"}